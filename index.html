<html>
<head>
    <title>Cyclist</title>
    <style>
        html {
            height: 100%;
        }

        body {
            min-height: 100%;
            background: linear-gradient(#ddd, #fff);
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
        }

        p {
            color: #555;
            font-size: 50pt;
        }
    </style>
</head>
<body>
    <p></p>
    <a href="https://github.com/carlnewton/cyclist"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://github.blog/wp-content/uploads/2008/12/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>
    <script>
        var urlParams = new URLSearchParams(window.location.search);
        var list = urlParams.get('l').split('.');
        var offset = urlParams.get('o');
        if (!offset) {
            offset = 0;
        }

        var interval = 7;

        if (urlParams.get('i')) {
            interval = parseInt(urlParams.get('i'));
        }
        var cycleDate = new Date(1590969600000);
        var listIndex = 0;
        while (cycleDate < Date.now() - (offset * 86400000)) {
            cycleDate.setDate(cycleDate.getDate() + interval);
            listIndex++;
            if (listIndex === list.length) {
                listIndex = 0;
            }
        }

        document.querySelector('p').appendChild(document.createTextNode(list[listIndex]));
    </script>
</body>
</html>
